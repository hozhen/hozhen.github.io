// This function picks up the click and opens the corresponding info window
function myclick(i) {
  google.maps.event.trigger(gmarkers[i], "click");
}


      function togglePoly(poly_num) {
        if (document.getElementById('poly'+poly_num)) {
           if (document.getElementById('poly'+poly_num).checked) {
              gpolys[poly_num].setMap(map);
           } else {
              gpolys[poly_num].setMap(null);
           }
        }
      } 


      function createClickablePolyline(poly, html, label, point, length) {
        gpolys.push(poly);
        var poly_num = gpolys.length - 1;
        if (!html) {html = "";}
        else { html += "<br>";}
	length = length * 0.000621371192; // convert meters to miles
        html += "length="+length.toFixed(2)+" miles";
        // html += poly.getLength().toFixed(2)+" m; "+(poly.getLength()*3.2808399).toFixed(2)+" ft; ";
        // html += (poly.getLength()*0.000621371192).toFixed(2)+" miles";
        var contentString = html;
        google.maps.event.addListener(poly,'click', function(event) {
          infowindow.setContent(contentString);
          if (event) {
             point = event.latLng;
          }
          infowindow.setPosition(point);
          infowindow.open(map);
          // map.openInfoWindowHtml(point,html); 
        }); 
        if (!label) {
          label = "polyline #"+poly_num;
        }
        label = "<a href='javascript:google.maps.event.trigger(gpolys["+poly_num+"],\"click\");'>"+label+"</a>";
        // add a line to the sidebar html
        side_bar_html += '<input type="checkbox" id="poly'+poly_num+'" checked="checked" onclick="togglePoly('+poly_num+');">' + label + '<br />';

      }
